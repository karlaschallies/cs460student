<!DOCTYPE html>
    <html>
        <head>
        <meta charset="utf-8" />
        <title>WebGPU Bonus</title>
        <style>
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: black; }
        #displayCanvas { width: 100%; height: 100%; display: block; }
        </style>
        <script src="https://cdn.babylonjs.com/babylon.js"></script>
        <script src="https://cdn.babylonjs.com/loaders/babylon.glTF2FileLoader.min.js"></script>
        </head>
<body>
    <canvas id="displayCanvas"></canvas>
    <script type="module">
    import { Pane } from 'https://cdn.jsdelivr.net/npm/tweakpane@4.0.5/dist/tweakpane.min.js';
    const myCanvas = document.getElementById("displayCanvas");
    const myEngine = new BABYLON.WebGPUEngine(myCanvas, { antialiasing: true });
    await myEngine.initAsync();
    const myScene = new BABYLON.Scene(myEngine);
    myScene.clearColor = new BABYLON.Color4(0.13, 0.14, 0.26, 1.0);
    const uiPane = new Pane();
    const settings = { model: 'skull', rotate: true };
    myScene.environmentTexture = BABYLON.CubeTexture.CreateFromPrefilteredData("https://playground.babylonjs.com/textures/environment.env", myScene);
    // Camera
    const myCamera = new BABYLON.ArcRotateCamera("cam", Math.PI / 2, Math.PI / 2.4, 5, BABYLON.Vector3.Zero(), myScene);
    myCamera.attachControl(myCanvas, true);
    // Lights
    const hemiLight = new BABYLON.HemisphericLight("hemi", new BABYLON.Vector3(0, 1, 0), myScene);
    hemiLight.intensity = 0.7;
    const dirLight = new BABYLON.DirectionalLight("dir", new BABYLON.Vector3(-1, -2, -1), myScene);
    dirLight.intensity = 1.2;
    const importResult = await BABYLON.SceneLoader.ImportMeshAsync("", "", "new_model.glb", myScene);
    const modelMeshes = importResult.meshes.filter(m => m instanceof BABYLON.Mesh);
    const pbrMat = new BABYLON.PBRMaterial("skullPBR", myScene);
    pbrMat.albedoColor = new BABYLON.Color3(1.0, 1.0, 1.0);
    pbrMat.metallic = 0.9;
    pbrMat.roughness = 0.15;
    pbrMat.clearCoat.isEnabled = true;
    pbrMat.clearCoat.intensity = 0.9;
    pbrMat.clearCoat.roughness = 0.10;
    pbrMat.reflectivityColor = new BABYLON.Color3(1.0, 0.9, 0.6);
    modelMeshes.forEach(m => { m.material = pbrMat; });
    const rootMesh = importResult.meshes[0];
    rootMesh.scaling.scaleInPlace(11);
    myScene.onBeforeRenderObservable.add(() => { rootMesh.rotation.y += myEngine.getDeltaTime() * 0.0003; });
    myEngine.runRenderLoop(() => { myScene.render(); });
    window.addEventListener("resize", () => myEngine.resize());
    </script>
</body>
</html>